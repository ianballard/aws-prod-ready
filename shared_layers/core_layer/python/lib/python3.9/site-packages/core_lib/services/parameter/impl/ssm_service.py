import boto3

ssm_client = boto3.client('ssm')

PARAMETER_VALUES = {}

def get_parameter_value(parameter_name, with_decryption: bool = None):

    parameter_name_str = parameter_name.value

    if parameter_name_str not in PARAMETER_VALUES:

        client_args = {'Name': parameter_name_str}
        if with_decryption is not None:
            client_args['WithDecryption'] = with_decryption

        client_response = ssm_client.get_parameter(**client_args)
        value = client_response.get('Parameter', {}).get('Value')
        PARAMETER_VALUES[parameter_name_str] = value

    return PARAMETER_VALUES[parameter_name_str]
