from core_lib.services.search.impl import open_search_service
from core_lib.services.search.impl import user_open_search_service

SEARCH_SERVICE_IMPL = open_search_service
USER_SEARCH_SERVICE_IMPL = user_open_search_service


def get_search_client():
    return SEARCH_SERVICE_IMPL.get_search_client()


def is_domain_processing_changes():
    return SEARCH_SERVICE_IMPL.is_domain_processing_changes()


def enable_audit_logs():
    return SEARCH_SERVICE_IMPL.enable_audit_logs()


def assign_access(role_name: str, target_function_role_tag_value: str):
    return SEARCH_SERVICE_IMPL.assign_access(
        role_name=role_name,
        target_function_role_tag_value=target_function_role_tag_value,
    )


def get_search_domain_url():
    return SEARCH_SERVICE_IMPL.get_search_domain_url()


def create_user_index():
    return USER_SEARCH_SERVICE_IMPL.create_user_index()


def search_users(search_str: str):
    return USER_SEARCH_SERVICE_IMPL.search_users(search_str=search_str.lower())


def upsert_user(user: dict):
    return USER_SEARCH_SERVICE_IMPL.upsert_user_doc(user=user)


def user_index_exists():
    return USER_SEARCH_SERVICE_IMPL.user_index_exists()


def health_check():
    return SEARCH_SERVICE_IMPL.get_client_info()
