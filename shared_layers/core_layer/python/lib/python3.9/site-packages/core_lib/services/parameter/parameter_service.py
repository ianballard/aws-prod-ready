import os

from core_lib.services.parameter.impl import ssm_service
from enum import Enum

PARAMETER_SERVICE_IMPL = ssm_service


class ParameterName(Enum):
    USER_POOL_ID = "USER_POOL_ID"
    USER_POOL_CLIENT = "USER_POOL_CLIENT"
    S3_APP_STORAGE_BUCKET = "S3_APP_STORAGE_BUCKET"
    DB_TABLE = "DB_TABLE"
    AUTH_EVENT_QUEUE_URL = f"AUTH_EVENT_QUEUE_URL-{os.getenv('stage')}"
    FIREHOSE_DELIVERY_STREAM = "FIREHOSE_DELIVERY_STREAM"


def get_parameter_value(
    parameter_name: ParameterName,
    with_decryption: bool = None,
    region: str = os.getenv("region"),
):
    return PARAMETER_SERVICE_IMPL.get_parameter_value(
        parameter_name=parameter_name, with_decryption=with_decryption, region=region
    )
