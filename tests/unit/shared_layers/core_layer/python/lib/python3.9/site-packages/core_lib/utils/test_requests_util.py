from core_lib.utils import requests_util
from unittest.mock import patch

from core_lib.utils.requests_util import TIMEOUT


class MockResponse:
    status_code = 200

    def json(self):
        return {}


@patch("requests.head")
def test_head_request(head):
    head.return_value = MockResponse()
    kwargs = {"url": "https://test.com"}
    response = requests_util.head(**kwargs, timeout=TIMEOUT)
    assert response.status_code == 200
    assert response.json() == {}
    head.assert_called_once_with(url=kwargs["url"], timeout=TIMEOUT)
