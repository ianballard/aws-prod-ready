from unittest.mock import MagicMock

import core_lib.services.database.database_service as dbs


def test_health_check():
    # Mock the DynamoDB service's health_check function
    dbs.DB_SERVICE_IMPL.health_check = MagicMock()

    # Mock the response of the describe_table function
    mock_response = {
        "Table": {
            "TableName": "test",
            "TableStatus": "ACTIVE"
            # add more fields as necessary for your test
        }
    }
    dbs.DB_SERVICE_IMPL.health_check.return_value = mock_response

    # Call the health_check function
    response = dbs.health_check()

    # Assert that the health_check function was called
    dbs.DB_SERVICE_IMPL.health_check.assert_called_once()

    # Assert that the health_check function returned the expected response
    assert response == mock_response
